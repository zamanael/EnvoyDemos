<?xml version="1.0" encoding="utf-8" standalone="no"?>
<schema>
  <screens/>
  <tables/>
  <queries>
	  
	 <categorycounters>
		  select CatNo,Description,Priority,RespReq from CategoryCounters
		  where CatNo = :CatNo
	 </categorycounters>

	  <checkbadgecount>
		  SELECT Count(*)as count FROM Commun WHERE operation = 5 AND PnlNo = :PnlNo
	  </checkbadgecount>
	  
	  <deletebadgeupdates>
		  DELETE FROM Commun  WHERE operation= 5 AND PnlNo = :PnlNo
	  </deletebadgeupdates>
	  
	  <getcommundata>
		  SELECT Id FROM (SELECT id FROM Commun WHERE PnlNo = :PnlNo ORDER BY id)  C WHERE RowNum = 1
	  </getcommundata>
	  
    <input>
      select  PnlRef,InpNo,Description,NoXact	,Priority,RespReq,
              DvrServerID,VideoEventType,EnableRecording, caObjectID 
      from Input where pnlref = :PnlRef and InpNo = :InpNo
    </input>
	  
    <insertcommun>
      INSERT INTO Commun(
        PnlNo,Operation,IsDelete,Key1,Key2,Key3,Key4  ,TimStamp
      )VALUES(
        :PnlNo,:Operation,:IsDelete,:Key1,:Key2,:Key3,:Key4,:TimStamp
      )
    </insertcommun>
	  
    <insertintocommun>
      INSERT INTO Commun(
        PnlNo,Operation,IsDelete,Key1,Key2,Key3,Key4  ,TimStamp
      )VALUES(
        :PnlNo,:Operation,:IsDelete,:Key1,:Key2,:Key3,:Key4,:TimStamp
      )
    </insertintocommun>
	  
    <InsertIntoLog>
      INSERT INTO Log (TimStamp, Description) VALUES (SYSTIMESTAMP, :Description)
    </InsertIntoLog>
    
    <insertnextintocommun>
		INSERT INTO Commun
		(
		PnlNo,Operation,IsDelete,Key1,Key2,Key3,Key4  ,TimStamp
		)
		SELECT
		PnlNo*2048,
		:Operation,
		:IsDelete,:Key1,:Key2,:Key3,:Key4,SYSTIMESTAMP
		FROM Panel p
	</insertnextintocommun>
    
    <link>
      select PnlRef			,ProgNo			,Description			,RptXact
      ,LnkPnl			,LnkProg			,Priority			,caObjectID
      ,RespReq from Link  where pnlref = :PnlRef and ProgNo = :ProgNo
    </link>   
    
    <mactivelinks>
      select PnlRef			,ProgNo			,Description			,Priority
      ,caObjectID	,RespReq from MActiveLinks  where pnlref = :PnlRef and ProgNo = :ProgNo
    </mactivelinks>
	  
	  <panel>
      select PnlNo			,Description			,CommPrior			,DwnLoadPrior
      ,PwrPrior			,RespOffOnLine			,RespDownloads		,RespACPowerFail
      ,RespModemActivity,ModemPrior,ComPort,PanelType,caObjectID=""
      from panel where pnlno = :PnlNo
    </panel>
	  
	  <panelall>
		  select pnlno from panel where enabled = 1
		  order by pnlno
	  </panelall>
	  
      <reader>
        select PnlRef			,RdrNo			,Description	,APBEntry,		,FDPrior			,OTLPrior
            ,DuPrior			,TrkPrior			,VPrior			,APBPrior			,OTHPrior
            ,ManPrior			,BypPrior			,FreePrior			,PINPrior			,RespForcedDoor
            ,RespOTL,RespDuress,RespTrackedBadge
            ,RespVoidBadge,RespAPBViolate,RespOtherDenied,RespBypass
            ,RespFreeAccess,RespManualDoorCtrl,RespCommonCode,RespValidAccess
            ,AckBypass,AckFreeAccess,AckManualDoorCtrl,AckCommonCode,AckValidAccess
            ,ValidPrior			,/*CCTVFlags			,*/DvrServerID			,VideoPriorityFrom
            ,VideoPriorityTo	,caObjectID 
        from Reader where pnlref = :PnlRef and RdrNo = :RdrNo
    </reader>
    
	  <relay>
		  select PnlRef,RelNo,Description,Priority,RespReq,caObjectID from Relay
		  where pnlref = :PnlRef and RelNo = :RelNo
	  </relay>
	  
  </queries>
  <lists/>
</schema>




